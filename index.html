<!DOCTYPE html>
<html lang="en">
<head>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "VisualArtwork",
          "@id": "https://heimdall.im/#content",
          "url": "https://heimdall.im",
          "name": "Heimdall | The Threshold of Perception",
          "description": "An interactive digital monument exploring provenance and perception. The landmark does not exist until it is unearthed by the viewer's gaze.",
          "artMedium": "Interactive Web Art",
          "artForm": "Digital Monument",
          "inLanguage": "en-US",
          "datePublished": "2025-01-01",
          "publisher": { "@id": "https://unearth.im/#organization" },
          "isPartOf": { "@id": "https://heimdall.im/#website" },
          "author": [
            { "@id": "https://josiest.com/#person" },
            { "@id": "https://felixvelas.co/#person" }
          ]
        },
        {
          "@type": "WebSite",
          "@id": "https://heimdall.im/#website",
          "url": "https://heimdall.im",
          "name": "heimdall.im",
          "publisher": { "@id": "https://unearth.im/#organization" }
        },
        {
          "@type": "Organization",
          "@id": "https://unearth.im/#organization",
          "name": "unearth.im",
          "url": "https://unearth.im",
          "logo": {
            "@type": "ImageObject",
            "url": "https://unearth.im/favicon-32x32.png"
          },
          "foundingDate": "2024",
          "sameAs": [
            "https://twitter.com/unearthim",
            "https://github.com/unearthim"
          ]
        },
        {
          "@type": "Person",
          "@id": "https://josiest.com/#person",
          "name": "Josie Jefferson",
          "url": "https://josiest.com",
          "jobTitle": "Digital Archaeologist & Trust Architect",
          "affiliation": { "@id": "https://unearth.im/#organization" },
          "sameAs": ["https://notjojo.im"]
        },
        {
          "@type": "Person",
          "@id": "https://felixvelas.co/#person",
          "name": "Felix Velasco",
          "url": "https://felixvelas.co",
          "jobTitle": "Trust Architect & Digital Archaeologist",
          "affiliation": { "@id": "https://unearth.im/#organization" },
          "sameAs": ["https://www.linkedin.com/in/felix-velasco-b793015"]
        }
      ]
    }
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heimdall | The Threshold of Perception</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for in-browser JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom font styles for Cinzel and Inter */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-cinzel {
            font-family: 'Cinzel', serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useEffect, useRef, useState } = React;

        // Note: lucide-react components (Sparkles, Eye, X, ExternalLink)
        // are replaced with simple text/emoji for this standalone HTML file
        // as they typically require a build step.
        // For a full React project, you would import and use them directly.
        const Sparkles = () => <span className="inline-block align-middle">‚ú®</span>;
        const Eye = ({ className }) => <span className={`inline-block align-middle ${className}`}>üëÅÔ∏è</span>;
        const X = () => <span className="inline-block align-middle">‚úï</span>;
        const ExternalLink = () => <span className="inline-block align-middle">‚Üó</span>;

        const Heimdall = () => {
          const canvasRef = useRef(null);
          const [active, setActive] = useState(false);
          const [infoVisible, setInfoVisible] = useState(true);
          const [showModal, setShowModal] = useState(false);
          const mouseRef = useRef({ x: 0, y: 0, active: false });
          const particlesRef = useRef([]);
          const frameRef = useRef(0);
          const bridgeIntensityRef = useRef(0);

          // SEO & Meta Handling
          useEffect(() => {
            document.title = "Heimdall | The Threshold of Perception";
            let metaDesc = document.querySelector('meta[name="description"]');
            if (!metaDesc) {
              metaDesc = document.createElement('meta');
              metaDesc.name = "description";
              document.head.appendChild(metaDesc);
            }
            metaDesc.content = "An interactive digital landmark exploring vigilance, connection, and the act of perception. A generative art piece for the modern curator.";
            
            // The font link is now handled by the <style> block in the head
            // const link = document.createElement('link');
            // link.href = "https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400&display=swap";
            // link.rel = "stylesheet";
            // document.head.appendChild(link);

            // return () => {
            //   document.head.removeChild(link);
            // };
          }, []);

          useEffect(() => {
            const canvas = canvasRef.current;
            const ctx = canvas.getContext('2d');
            let width, height;

            const init = () => {
              width = window.innerWidth;
              height = window.innerHeight;
              canvas.width = width;
              canvas.height = height;
              
              const particleCount = width < 768 ? 400 : 1200; 
              particlesRef.current = [];
              
              for (let i = 0; i < particleCount; i++) {
                particlesRef.current.push({
                  x: Math.random() * width,
                  y: Math.random() * height,
                  vx: (Math.random() - 0.5) * 0.5,
                  vy: (Math.random() - 0.5) * 0.5,
                  size: Math.random() * 2 + 0.5,
                  hue: Math.random() * 60 + 180, 
                  baseX: Math.random() * width,
                  baseY: Math.random() * height,
                  locked: false
                });
              }
            };

            const handleResize = () => {
              init();
            };

            const handleMouseMove = (e) => {
              mouseRef.current = {
                x: e.clientX,
                y: e.clientY,
                active: true
              };
              setActive(true);
              if (infoVisible) setInfoVisible(false);
            };

            const handleTouchMove = (e) => {
              mouseRef.current = {
                x: e.touches[0].clientX,
                y: e.touches[0].clientY,
                active: true
              };
              setActive(true);
              if (infoVisible) setInfoVisible(false);
            };

            const handleLeave = () => {
              mouseRef.current.active = false;
              setActive(false);
            };

            window.addEventListener('resize', handleResize);
            window.addEventListener('mousemove', handleMouseMove);
            window.addEventListener('touchmove', handleTouchMove);
            window.addEventListener('touchend', handleLeave);
            canvas.addEventListener('mouseleave', handleLeave);

            init();

            const animate = () => {
              ctx.fillStyle = 'rgba(5, 5, 8, 0.2)'; 
              ctx.fillRect(0, 0, width, height);
              
              const targetIntensity = mouseRef.current.active ? 1 : 0;
              bridgeIntensityRef.current += (targetIntensity - bridgeIntensityRef.current) * 0.05;

              const time = frameRef.current * 0.005;

              particlesRef.current.forEach(p => {
                const noiseX = Math.sin(p.y * 0.01 + time) * 2;
                const noiseY = Math.cos(p.x * 0.01 + time) * 2;

                if (mouseRef.current.active) {
                  const dx = mouseRef.current.x - p.x;
                  const dy = mouseRef.current.y - p.y;
                  const dist = Math.sqrt(dx * dx + dy * dy);
                  
                  const visionRadius = 300; 

                  if (dist < visionRadius) {
                    const angle = Math.atan2(dy, dx);
                    const force = (visionRadius - dist) / visionRadius;
                    
                    p.vx += Math.cos(angle) * force * 0.5;
                    p.vy += Math.sin(angle) * force * 0.5;
                    
                    p.hue = 200 + (dist / visionRadius) * 160; 
                    p.locked = true;
                  } else {
                    p.locked = false;
                  }
                } else {
                   p.locked = false;
                }

                if (!p.locked) {
                    p.vx += (Math.random() - 0.5) * 0.05;
                    p.vy += (Math.random() - 0.5) * 0.05;
                    p.vx *= 0.99;
                    p.vy *= 0.99;
                    p.hue = (p.hue + 0.1) % 360;
                }

                p.x += p.vx + noiseX * 0.2;
                p.y += p.vy + noiseY * 0.2;

                if (p.x < 0) p.x = width;
                if (p.x > width) p.x = 0;
                if (p.y < 0) p.y = height;
                if (p.y > height) p.y = 0;

                const size = p.locked ? p.size * 2.5 : p.size;
                const opacity = p.locked ? 1 : 0.4;
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
                ctx.fillStyle = `hsla(${p.hue}, 80%, 60%, ${opacity})`;
                
                if (p.locked) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = `hsla(${p.hue}, 80%, 60%, 0.8)`;
                } else {
                    ctx.shadowBlur = 0;
                }
                
                ctx.fill();
              });

              if (bridgeIntensityRef.current > 0.01) {
                ctx.strokeStyle = `rgba(255, 255, 255, ${bridgeIntensityRef.current * 0.3})`;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.arc(mouseRef.current.x, mouseRef.current.y, 40, 0, Math.PI * 2);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(mouseRef.current.x, mouseRef.current.y);
                ctx.lineTo(width/2, height/2); 
                ctx.strokeStyle = `rgba(100, 200, 255, ${bridgeIntensityRef.current * 0.1})`;
                ctx.stroke();
              }

              frameRef.current++;
              requestAnimationFrame(animate);
            };

            const animationId = requestAnimationFrame(animate);

            return () => {
              cancelAnimationFrame(animationId);
              window.removeEventListener('resize', handleResize);
              window.removeEventListener('mousemove', handleMouseMove);
              window.removeEventListener('touchmove', handleTouchMove);
              window.removeEventListener('touchend', handleLeave);
              canvas.removeEventListener('mouseleave', handleLeave);
            };
          }, []); 

          return (
            <div className="relative w-full h-screen bg-black overflow-hidden font-sans text-white">
              <canvas 
                ref={canvasRef} 
                className="absolute inset-0 z-0 cursor-crosshair touch-none"
              />

              {/* Narrative UI Overlay */}
              <div className={`absolute inset-0 z-10 flex flex-col justify-between p-6 md:p-12 transition-opacity duration-500 ${showModal ? 'opacity-0 pointer-events-none' : 'opacity-100'}`}>
                
                <header className="flex justify-between items-start opacity-80 pointer-events-auto">
                  <div 
                    onClick={() => setShowModal(true)}
                    className="group cursor-pointer"
                  >
                    <h1 className="text-3xl md:text-5xl font-bold tracking-wider group-hover:text-cyan-200 transition-colors font-cinzel">
                      HEIMDALL
                    </h1>
                    <p className="text-xs md:text-sm text-cyan-300 tracking-[0.2em] mt-1 uppercase flex items-center gap-2">
                      The Watcher at the Threshold
                      <span className="opacity-0 group-hover:opacity-100 transition-opacity text-[10px] border border-cyan-300 rounded px-1">Statement</span>
                    </p>
                  </div>
                  <div className="hidden md:block">
                    <div className="w-8 h-8 border border-white/20 rounded-full flex items-center justify-center animate-pulse">
                       <Eye size={16} className="text-cyan-200" />
                    </div>
                  </div>
                </header>

                <div 
                  className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center transition-opacity duration-1000 ${infoVisible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}
                >
                  <p className="text-lg md:text-xl text-white/70 italic max-w-md leading-relaxed font-cinzel">
                    "The bridge only exists when you look for it."
                  </p>
                  <p className="mt-4 text-xs text-cyan-400 uppercase tracking-widest animate-bounce">
                    Touch to Perceive
                  </p>
                </div>

                <footer className="flex justify-between items-end opacity-60 text-xs md:text-sm pointer-events-auto">
                  <div className="flex flex-col gap-1">
                    <span className="flex items-center gap-2">
                      <Sparkles size={12} />
                      <span>Identity . Connection . Vigilance</span>
                    </span>
                    <span className="text-white/40">unearth.im/heimdall</span>
                  </div>
                  
                  <div className="text-right">
                     <p className={`transition-all duration-700 ${active ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-0'}`}>
                       Signal detected. <br/> 
                       <span className="text-cyan-300">Bifr√∂st aligned.</span>
                     </p>
                  </div>
                </footer>
              </div>

              {/* ARTIST STATEMENT MODAL */}
              {showModal && (
                <div className="absolute inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300 pointer-events-none">
                  <div className="relative max-w-2xl w-full bg-zinc-900/90 border border-zinc-800 p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] pointer-events-auto">
                    
                    <button 
                      onClick={() => setShowModal(false)}
                      className="absolute top-6 right-6 text-zinc-500 hover:text-white transition-colors"
                    >
                      <X size={24} />
                    </button>

                    <div className="space-y-6 font-light text-zinc-300">
                      <h2 className="text-2xl md:text-3xl text-white font-serif mb-2 font-cinzel">
                        Artist Statement
                      </h2>
                      
                      <div className="h-px w-20 bg-cyan-500 mb-6"></div>

                      <p>
                        <strong className="text-white">Heimdall</strong> is not a guard dog; he is a filter. 
                        In Norse mythology, he could hear the grass grow and see for a hundred leagues. 
                        In the digital age, this level of omniscience is no longer a godlike power‚Äîit is the baseline noise of the internet.
                      </p>

                      <p>
                        We are drowning in signal. The role of the modern individual is no longer to seek information, but to <em>curate</em> it. 
                        To stand at the threshold of one's own attention and decide what is allowed to cross.
                      </p>

                      {/* NEW VISUAL LEGEND SECTION */}
                      <div className="mt-8 mb-8 bg-zinc-950/50 p-6 rounded-lg border border-zinc-800">
                        <h3 className="text-white font-serif text-lg tracking-wide mb-4 border-b border-zinc-700 pb-2 font-cinzel">
                          Visual Legend
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                          <div>
                            <strong className="text-cyan-300 block mb-1">The Swarm (Entropy)</strong>
                            <span className="text-zinc-400 leading-relaxed">The chaotic, dark particles represent the infinite noise of the internet. The "pre-curated" state of the world.</span>
                          </div>
                          <div>
                            <strong className="text-cyan-300 block mb-1">Your Touch (The Gaze)</strong>
                            <span className="text-zinc-400 leading-relaxed">The cursor represents attention. A landmark does not exist until an observer decides to "unearth" it.</span>
                          </div>
                          <div>
                            <strong className="text-cyan-300 block mb-1">The Bridge (Bifr√∂st)</strong>
                            <span className="text-zinc-400 leading-relaxed">When particles align to your gaze, they shift spectrum (cyan/gold). This is "connection"‚Äîthe moment noise becomes signal.</span>
                          </div>
                          <div>
                            <strong className="text-cyan-300 block mb-1">The Eye (Vigilance)</strong>
                            <span className="text-zinc-400 leading-relaxed">Appears only during sustained interaction. It represents the "Curator," the one who watches the threshold.</span>
                          </div>
                        </div>
                      </div>

                      <p className="italic text-zinc-400 border-l-2 border-zinc-700 pl-4 my-6">
                        "Provenance is not just about where a thing comes from, but how it is perceived. 
                        The landmark does not exist until it is unearthed by the viewer's gaze."
                      </p>

                      <div className="pt-6 mt-8 border-t border-zinc-800 text-sm text-zinc-400">
                        <small>
                          a <b><a href="https://sentientification.com" target="_blank" rel="noopener noreferrer" className="hover:text-cyan-400 transition-colors">liminal mind meld</a></b> collaboration:<br />
                          digital monument by <b><a href="https://unearth.im" target="_blank" rel="noopener noreferrer" className="hover:text-cyan-400 transition-colors">unearth.im</a></b> | <b><a href="https://archaeobytology.org" target="_blank" rel="noopener noreferrer" className="hover:text-cyan-400 transition-colors">archive & anvil</a></b>
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              <div className="absolute inset-0 pointer-events-none opacity-[0.03] z-20" 
                   style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")` }}>
              </div>
            </div>
          );
        };

        // Render the Heimdall component into the root div
        ReactDOM.createRoot(document.getElementById('root')).render(<Heimdall />);
    </script>
</body>
</html>